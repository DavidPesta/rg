/*!v3.0.0*/
riot.tag2("rg-alerts",'<div each="{opts.alerts}" class="alert {type} {isvisible: isvisible}" onclick="{select}"> <a class="close" aria-label="Close" onclick="{parent.dismiss}" if="{dismissable != false}"> <span aria-hidden="true">&times;</span> </a> {text} </div>','rg-alerts,[riot-tag="rg-alerts"] { font-size: 0.9em; position: relative; top: 0; right: 0; left: 0; width: 100%; } rg-alerts .alert,[riot-tag="rg-alerts"] .alert { display: none; position: relative; margin-bottom: 15px; padding: 15px 35px 15px 15px; } rg-alerts .isvisible,[riot-tag="rg-alerts"] .isvisible { display: block; } rg-alerts .close,[riot-tag="rg-alerts"] .close { position: absolute; top: 50%; right: 20px; line-height: 12px; font-size: 1.1em; border: 0; background-color: transparent; color: rgba(0, 0, 0, 0.5); cursor: pointer; outline: none; transform: translate3d(0, -50%, 0); } rg-alerts .danger,[riot-tag="rg-alerts"] .danger { color: #8f1d2e; background-color: #ffced8; } rg-alerts .information,[riot-tag="rg-alerts"] .information { color: #31708f; background-color: #d9edf7; } rg-alerts .success,[riot-tag="rg-alerts"] .success { color: #2d8f40; background-color: #ccf7d4; } rg-alerts .warning,[riot-tag="rg-alerts"] .warning { color: #c06329; background-color: #f7dfd0; }',"",function(opts){var _this=this;this.on("update",function(){opts.alerts&&opts.alerts.forEach(function(alert){alert._id=alert._id||(Math.floor(60466175*Math.random())+1679615).toString(36),"undefined"==typeof alert.isvisible&&(alert.isvisible=!0),alert.timeout&&(alert.startTimer=function(){alert.timer=setTimeout(function(){_this.dismiss({item:alert}),_this.update()},alert.timeout)},alert.startTimer())})}),this.dismiss=function(e){var alert=e.item;alert.isvisible=!1,clearTimeout(alert.timer),_this.trigger("dismiss",alert)},this.select=function(e){var alert=e.item;alert.onclick&&alert.onclick(alert),_this.trigger("select",alert)}},"{ }"),riot.tag2("rg-bubble",'<div class="context"> <div class="bubble {isvisible: isvisible}"> {opts.text} </div> <div class="content" onmouseover="{showBubble}" onmouseout="{hideBubble}" onclick="{toggleBubble}"> <yield></yield> </div> </div>','rg-bubble .context,[riot-tag="rg-bubble"] .context,rg-bubble .content,[riot-tag="rg-bubble"] .content { display: inline-block; position: relative; } rg-bubble .bubble,[riot-tag="rg-bubble"] .bubble { position: absolute; top: -50px; left: 50%; transform: translate3d(-50%, 0, 0); padding: 10px 15px; background-color: #000; color: white; text-align: center; font-size: 0.9em; line-height: 1; white-space: nowrap; display: none; } rg-bubble .isvisible,[riot-tag="rg-bubble"] .isvisible { display: block; } rg-bubble .bubble:after,[riot-tag="rg-bubble"] .bubble:after { content: \'\'; position: absolute; display: block; bottom: -20px; left: 50%; transform: translate3d(-50%, 0, 0); width: 0; height: 0; border: 10px solid transparent; border-top-color: #000; }',"",function(opts){var _this=this;this.showBubble=function(){clearTimeout(_this._timer),_this.isvisible=!0},this.hideBubble=function(){_this._timer=setTimeout(function(){_this.isvisible=!1,_this.update()},1e3)},this.toggleBubble=function(){_this.isvisible=!_this.isvisible}},"{ }"),riot.tag2("rg-code",'<div class="editor"></div>','rg-code .editor,[riot-tag="rg-code"] .editor { position: absolute; top: 0; right: 0; bottom: 0; left: 0; }',"",function(opts){var _this=this;opts.editor||(opts.editor={code:""});var editor=void 0,setupEditor=function(){editor.setTheme("ace/theme/"+(opts.editor.theme||"monokai")),editor.getSession().setMode("ace/mode/"+(opts.editor.mode||"html")),editor.getSession().setTabSize(opts.editor.tabsize||2),editor.getSession().setUseSoftTabs(opts.editor.softtabs),editor.getSession().setUseWrapMode(opts.editor.wordwrap),editor.setReadOnly(opts.editor.readonly)};this.on("mount",function(){if(editor=ace.edit(_this.root.querySelector(".editor")),editor.$blockScrolling=1/0,_this.on("update",function(){setupEditor(),opts.editor.code!=editor.getValue()&&editor.setValue(opts.editor.code,1)}),opts.url){var req=new XMLHttpRequest;req.onload=function(resp){opts.editor.code=resp,_this.update()},req.open("get",opts.url,!0),req.send()}editor.setValue(opts.editor.code,1),editor.getSession().on("change",function(e){opts.editor.code=editor.getValue(),_this.trigger("onchange",editor.getValue())}),setupEditor(),_this.update()})}),riot.tag2("rg-credit-card-number",'<input type="text" name="cardnumber" class="field card-no {icon} {valid: opts.card.valid}" oninput="{validate}" placeholder="{opts.card.placeholder}">','rg-credit-card-number .field,[riot-tag="rg-credit-card-number"] .field { font-size: 1em; padding: 10px; border: 1px solid #D3D3D3; box-sizing: border-box; outline: none; -webkit-appearance: none; -moz-appearance: none; appearance: none; } rg-credit-card-number .card-no,[riot-tag="rg-credit-card-number"] .card-no { padding-right: 60px; background-repeat: no-repeat; background-position: right center; background-size: 60px; } rg-credit-card-number .amex,[riot-tag="rg-credit-card-number"] .amex { background-image: url(img/amex.png); } rg-credit-card-number .diners_club,[riot-tag="rg-credit-card-number"] .diners_club { background-image: url(img/diners_club.png); } rg-credit-card-number .discover,[riot-tag="rg-credit-card-number"] .discover { background-image: url(img/discover.png); } rg-credit-card-number .jcb,[riot-tag="rg-credit-card-number"] .jcb { background-image: url(img/jcb.png); } rg-credit-card-number .mastercard,[riot-tag="rg-credit-card-number"] .mastercard { background-image: url(img/mastercard.png); } rg-credit-card-number .visa,[riot-tag="rg-credit-card-number"] .visa { background-image: url(img/visa.png); }',"",function(opts){function validateCreditCard(input){var card,card_type,card_types,get_card_type,is_valid_length,is_valid_luhn,normalize,validate,validate_number,_i,_len,_ref,__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1};card_types=[{name:"amex",icon:"images/amex.png",pattern:/^3[47]/,valid_length:[15]},{name:"diners_club",icon:"images/diners_club.png",pattern:/^30[0-5]/,valid_length:[14]},{name:"diners_club",icon:"images/diners_club.png",pattern:/^36/,valid_length:[14]},{name:"jcb",icon:"images/jcb.png",pattern:/^35(2[89]|[3-8][0-9])/,valid_length:[16]},{name:"laser",pattern:/^(6304|670[69]|6771)/,valid_length:[16,17,18,19]},{name:"visa_electron",pattern:/^(4026|417500|4508|4844|491(3|7))/,valid_length:[16]},{name:"visa",icon:"images/visa.png",pattern:/^4/,valid_length:[16]},{name:"mastercard",icon:"images/mastercard.png",pattern:/^5[1-5]/,valid_length:[16]},{name:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,valid_length:[12,13,14,15,16,17,18,19]},{name:"discover",icon:"images/discover.png",pattern:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,valid_length:[16]}];var options={};for(null==options.accept&&(options.accept=function(){var _i,_len,_results;for(_results=[],_i=0,_len=card_types.length;_len>_i;_i++)card=card_types[_i],_results.push(card.name);return _results}()),_ref=options.accept,_i=0,_len=_ref.length;_len>_i;_i++)if(card_type=_ref[_i],__indexOf.call(function(){var _j,_len1,_results;for(_results=[],_j=0,_len1=card_types.length;_len1>_j;_j++)card=card_types[_j],_results.push(card.name);return _results}(),card_type)<0)throw"Credit card type '"+card_type+"' is not supported";return get_card_type=function(number){var _j,_len1,_ref1;for(_ref1=function(){var _k,_len1,_ref1,_results;for(_results=[],_k=0,_len1=card_types.length;_len1>_k;_k++)card=card_types[_k],_ref1=card.name,__indexOf.call(options.accept,_ref1)>=0&&_results.push(card);return _results}(),_j=0,_len1=_ref1.length;_len1>_j;_j++)if(card_type=_ref1[_j],number.match(card_type.pattern))return card_type;return null},is_valid_luhn=function(number){var digit,n,sum,_j,_len1,_ref1;for(sum=0,_ref1=number.split("").reverse(),n=_j=0,_len1=_ref1.length;_len1>_j;n=++_j)digit=_ref1[n],digit=+digit,n%2?(digit*=2,sum+=10>digit?digit:digit-9):sum+=digit;return sum%10===0},is_valid_length=function(number,card_type){var _ref1;return _ref1=number.length,__indexOf.call(card_type.valid_length,_ref1)>=0},validate_number=function(_this){return function(number){var length_valid,luhn_valid;return card_type=get_card_type(number),luhn_valid=!1,length_valid=!1,null!=card_type&&(luhn_valid=is_valid_luhn(number),length_valid=is_valid_length(number,card_type)),{card_type:card_type,valid:luhn_valid&&length_valid,luhn_valid:luhn_valid,length_valid:length_valid}}}(this),normalize=function(number){return number.replace(/[ -]/g,"")},(validate=function(_this){return function(){return validate_number(normalize(input))}}(this))(input)}var _this2=this;opts.card||(opts.card={cardnumber:""}),this.on("update",function(){_this2.cardnumber.value!=opts.card.cardnumber&&(_this2.cardnumber.value=opts.card.cardnumber),_this2.validate()}),this.validate=function(){opts.card.cardnumber=_this2.cardnumber.value;var res=validateCreditCard(opts.card.cardnumber);opts.card.valid=res.valid,_this2.icon=opts.card.valid?res.card_type.name:""}},"{ }");